<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <!-- 매퍼 파일은 일반적으로 table 당 하나 -->
<mapper namespace="orm.mybatis.FinalMapper"> <!-- 패키지 명. 파일이름 -->
	<insert id="ptrinsert" parameterType="fitness.dto.RegistrationDto">
		insert into pt_register values(ptr_seq.nextval,#{tr_num},#{ptr_time},#{ptr_count},#{ptr_ok})
	</insert>
	
	
<!--////////// center 관련 - 작성자 : 유예진 //////////-->
	<insert id="ctinsert" parameterType="fitness.dto.CenterDto">
		insert into center values(ct_seq.nextval, #{ct_name}, #{ct_tel}, #{ct_addr}, #{ct_intro})
	</insert>
	<select id="ctslist" resultType="fitness.dto.CenterDto">
		select * from center
	</select>
	<select id="ctdetail" resultType="fitness.dto.CenterDto" parameterType="String" >
		select * from center where ct_code=#{value}
	</select>
	<update id="ctupdate" parameterType="fitness.dto.CenterDto">
		update center set ct_name=#{ct_name}, ct_tel=#{ct_tel},ct_addr= #{ct_addr}, ct_intro=#{ct_intro} where ct_code=#{ct_code}
	</update>
	<delete id="ctdelete" parameterType="String" >
		delete center where ct_code=#{value}
	</delete>


<!--////////// staff 관련 - 작성자 : 유예진 //////////-->
	<insert id="stfinsert" parameterType="fitness.dto.StaffDto">
		 insert into staff values(staff_seq.nextval, #{stf_name}, #{stf_phone}, sysdate , #{stf_picture}, #{pos_code}, #{ct_code})
	</insert>
	<select id="stflist" resultType="fitness.dto.StaffDto">
		select * from staff 
	</select>
	<select id="stfdetail" parameterType="int" resultType="fitness.dto.StaffDto">
		select * from staff where stf_num=#{value}
	</select>
	<update id="stfupdate" parameterType="fitness.dto.StaffDto">
		update staff set stf_name= #{stf_name}, stf_phone= #{stf_phone}, stf_picture= #{stf_picture}, 
										pos_code=#{pos_code}, ct_code= #{ct_code} where stf_num=#{stf_num}
	</update>
	<delete id="stfdelete" parameterType="int">
		delete from staff where stf_num=#{value}
	</delete>
	
<!--////////// 1member 관련(회원등록) - 작성자:이성진 //////////-->
	<insert id="meminsert" parameterType="fitness.dto.MemberDto">
		 insert into member values(mem_seq.nextval,#{mem_name},#{mem_phone},#{mem_addr},#{mem_email},#{mem_age},#{mem_gen},#{mem_birth},sysdate,#{mem_picture},#{ct_code})
	</insert>
	<!-- member페이징처리(전체글의 갯수) -->
	<select id="getMemCount" resultType="int">
		select count(mem_num) cnt from member
	</select>
	<!-- 전체목록보기 listAll -->
	<select id="memSelectAll" resultType="fitness.dto.MemberDto">
		select * from(
			select  aa.*,rownum rnum from
			(
				select * from member
				order by mem_name asc
			)aa
		)
		<![CDATA[where rnum>=#{startRow} and rnum<=#{endRow}]]>

	</select>
	<!-- 한명상세보기 ListOne -->
	<select id="memListOne" parameterType="int" resultType="fitness.dto.MemberDto">
		select * from member where mem_num=#{value}
	</select>
	
	<!-- 회원삭제 memDelete -->
	<delete id="memDelete" parameterType="int">
		delete from member where mem_num=#{value}
	</delete>
	
	<!-- 회원수정 memUpdate -->
	<update id="memUpdate" parameterType="fitness.dto.MemberDto">
		update member set mem_name= #{mem_name}, mem_phone= #{mem_phone}, mem_addr= #{mem_addr}, mem_email= #{mem_email},  
											     mem_age=#{mem_age}, mem_gen=#{mem_gen}, mem_birth=#{mem_birth}, 
												 mem_picture= #{mem_picture},  ct_code= #{ct_code} where mem_num=#{mem_num}
	</update>
</mapper>